<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <!--this part adds a component if not already there. pre-requisite-->
    <operations>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/ThingDef[defName = "Human"]/comps</xpath>
        <success>Always</success>
        <nomatch Class="PatchOperationAdd">
          <xpath>/Defs/ThingDef[defName = "Human"]</xpath>
          <value>
            <comps />
          </value>
        </nomatch>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/ThingDef[defName = "Human"]/comps</xpath>
        <value>
          <li Class = "FacialStuff.CompProperties_BodyAnimator">
            <!--needed for everything with hands-->
            <bipedWithHands>true</bipedWithHands>
            <!--which hand texture?-->
            <handType>Human</handType>
            <!--custom drawers can be used here-->
            <bodyDrawers>
              <li Class ="FacialStuff.HumanBipedDrawer"/>
            </bodyDrawers>
          </li>
          <li Class = "FacialStuff.CompProperties_Face">
            <!--if false, vanilla heads are used, otherwise the FS blank texture is used-->
            <needsBlankHumanHead>true</needsBlankHumanHead>
            <!-- off = no mouth-->
            <hasMouth>true</hasMouth>
            <!--race can have beards?-->
            <hasBeard>true</hasBeard>
            <!--race can have wrinkles?-->
            <hasWrinkles>true</hasWrinkles>
            <!--head rotation / tracking-->
            <canRotateHead>true</canRotateHead>
			
			<useTexCollection>
				<li>Human</li>
			</useTexCollection>
			
			<!--
			The number of members declared in this list must be the same as the number of eye BodyPartRecords declared in the race's BodyDef.
			An eye BodyPartRecord should have BodyPartGroupDef of "Eyes".
			The order of the PerEyeDef declared in this list matches the order of eye BodyPatRecords declared in the race's BodyDef.
			-->
			<perEyeBehaviors>
				<!-- The following PerEyeDefs are declared in Defs/EyeDefs/PerEyeDef_Human.xml -->
				<!-- Left eye is declared first in human BodyDef, so this corresponds to the left eye -->
				<li>
					<!-- 
					If the texture of the eye should be mirrored horizontally. 
					For example, left eye can be rendered by mirroring right eye's texture.
					-->
					<drawMirrored>true</drawMirrored>
					<!-- Whether the eye can blink -->
					<canBlink>true</canBlink>
					<!-- Whether the eye should be closed when aiming -->
					<closeWhileAiming>true</closeWhileAiming>
					<!-- Whether the eye should be closed when sleeping -->
					<closeWhileSleeping>true</closeWhileSleeping>
					<!-- 
					Whether the eye should be drawn for each direction. Bit set to 1 enables drawing. 
					Bit 0 is north, bit 1 is east, bit 2 is south, bit 3 is west. 
					-->
					<!-- Draw when facing south and west (0b1100) -->
					<drawDirBitFlag>12</drawDirBitFlag>
				</li>
				<!-- Right eye is declared after the left eye in human BodyDef, so this corresponds to the right eye -->
				<li>
					<drawMirrored>false</drawMirrored>
					<canBlink>true</canBlink>
					<closeWhileAiming>false</closeWhileAiming>
					<closeWhileSleeping>true</closeWhileSleeping>
					<!-- Draw when facing east and south (0b0110) -->
					<drawDirBitFlag>6</drawDirBitFlag>
				</li>
				<!-- More list members should be added if the race has more eyes -->
			</perEyeBehaviors>
			
			<!-- 
			This determines what mouth texture is displayed under what circumstances 
			Look at FacialStuff.AI.HumanMouth to see how it is implemented.
			-->
			<mouthBehavior Class = "FacialStuff.AI.HumanMouthBehavior">
				<!-- Set public member variables if needed -->
			</mouthBehavior>
			
            <!--the drawer for the head. more than one can be defined-->
            <headDrawers>
              <li Class ="FacialStuff.HumanHeadDrawer"/>
              <!--  <li Class ="FacialStuff.SecondHeadDrawer"/>-->
            </headDrawers>
          </li>
        </value>
      </li>
    </operations>
  </Operation>

</Patch>
